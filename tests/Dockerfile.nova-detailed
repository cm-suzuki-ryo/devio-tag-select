FROM python:3.11-slim
WORKDIR /app
RUN apt-get update && apt-get install -y mecab libmecab-dev mecab-ipadic-utf8 && rm -rf /var/lib/apt/lists/*
RUN echo "dicdir = /var/lib/mecab/dic/ipadic-utf8" > /etc/mecabrc
COPY lambda-code/requirements.txt .
RUN pip install -r requirements.txt
RUN pip install mecab-python3 boto3 urllib3
COPY lambda-code/*.py .
COPY tests/test_nova_detailed.py .
CMD ["python", "test_nova_detailed.py"]
